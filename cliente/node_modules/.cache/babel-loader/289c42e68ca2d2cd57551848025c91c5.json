{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar deep_diff_1 = require(\"deep-diff\"); // @ts-ignore\n\n\nvar nested_property_1 = require(\"nested-property\");\n\nfunction isPlainObj() {\n  var args = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n\n  return args.every(function (d) {\n    if (!d) {\n      return false;\n    }\n\n    var prototype = Object.getPrototypeOf(d);\n    return Object.prototype.toString.call(d).slice(8, -1) === 'Object' && (prototype === null || prototype === Object.getPrototypeOf({}));\n  });\n}\n\nfunction isArray() {\n  var args = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n\n  return args.every(Array.isArray);\n}\n\nfunction isNumber() {\n  var args = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    args[_i] = arguments[_i];\n  }\n\n  return args.every(function (d) {\n    return typeof d === 'number';\n  });\n}\n\nfunction treeChanges(data, nextData) {\n  if (!data || !nextData) {\n    throw new Error('Missing required parameters');\n  }\n\n  return {\n    changed: function (key) {\n      var left = nested_property_1.get(data, key);\n      var right = nested_property_1.get(nextData, key);\n\n      if (isArray(left, right) || isPlainObj(left, right)) {\n        return !!deep_diff_1.diff(left, right);\n      }\n\n      return left !== right;\n    },\n    changedFrom: function (key, previous, actual) {\n      if (typeof key === 'undefined') {\n        throw new Error('Key parameter is required');\n      }\n\n      var useActual = typeof previous !== 'undefined' && typeof actual !== 'undefined';\n      var left = nested_property_1.get(data, key);\n      var right = nested_property_1.get(nextData, key);\n      var leftComparator = Array.isArray(previous) ? previous.indexOf(left) >= 0 : left === previous;\n      var rightComparator = Array.isArray(actual) ? actual.indexOf(right) >= 0 : right === actual;\n      return leftComparator && (useActual ? rightComparator : !useActual);\n    },\n    changedTo: function (key, actual) {\n      if (typeof key === 'undefined') {\n        throw new Error('Key parameter is required');\n      }\n\n      var left = nested_property_1.get(data, key);\n      var right = nested_property_1.get(nextData, key);\n      var leftComparator = Array.isArray(actual) ? actual.indexOf(left) < 0 : left !== actual;\n      var rightComparator = Array.isArray(actual) ? actual.indexOf(right) >= 0 : right === actual;\n      return leftComparator && rightComparator;\n    },\n    increased: function (key) {\n      if (typeof key === 'undefined') {\n        throw new Error('Key parameter is required');\n      }\n\n      return isNumber(nested_property_1.get(data, key), nested_property_1.get(nextData, key)) && nested_property_1.get(data, key) < nested_property_1.get(nextData, key);\n    },\n    decreased: function (key) {\n      if (typeof key === 'undefined') {\n        throw new Error('Key parameter is required');\n      }\n\n      return isNumber(nested_property_1.get(data, key), nested_property_1.get(nextData, key)) && nested_property_1.get(data, key) > nested_property_1.get(nextData, key);\n    }\n  };\n}\n\nexports.default = treeChanges;","map":{"version":3,"mappings":";;;;;;AAAA,uC,CACA;;;AACA;;AAuBA,SAASA,UAAT,GAAmB;AAAC;;OAAA,yCAAY;AAAZC;;;AAClB,SAAOA,IAAI,CAACC,KAAL,CAAW,UAACC,CAAD,EAAO;AACvB,QAAI,CAACA,CAAL,EAAQ;AACN,aAAO,KAAP;AACD;;AACD,QAAMC,SAAS,GAAGC,MAAM,CAACC,cAAP,CAAsBH,CAAtB,CAAlB;AAEA,WACEE,MAAM,CAACD,SAAP,CAAiBG,QAAjB,CAA0BC,IAA1B,CAA+BL,CAA/B,EAAkCM,KAAlC,CAAwC,CAAxC,EAA2C,CAAC,CAA5C,MAAmD,QAAnD,KACCL,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAKC,MAAM,CAACC,cAAP,CAAsB,EAAtB,CADrC,CADF;AAID,GAVM,CAAP;AAWD;;AAED,SAASI,OAAT,GAAgB;AAAC;;OAAA,yCAAY;AAAZT;;;AACf,SAAOA,IAAI,CAACC,KAAL,CAAWS,KAAK,CAACD,OAAjB,CAAP;AACD;;AAED,SAASE,QAAT,GAAiB;AAAC;;OAAA,yCAAY;AAAZX;;;AAChB,SAAOA,IAAI,CAACC,KAAL,CAAW,UAACC,CAAD,EAAO;AAAK,kBAAOA,CAAP,KAAa,QAAb;AAAqB,GAA5C,CAAP;AACD;;AAED,SAAwBU,WAAxB,CAAoCC,IAApC,EAAiDC,QAAjD,EAAgE;AAC9D,MAAI,CAACD,IAAD,IAAS,CAACC,QAAd,EAAwB;AACtB,UAAM,IAAIC,KAAJ,CAAU,6BAAV,CAAN;AACD;;AAED,SAAO;AACLC,WAAO,EAAP,UAAQC,GAAR,EAA6B;AAC3B,UAAMC,IAAI,GAAGC,sBAAON,IAAP,EAAaI,GAAb,CAAb;AACA,UAAMG,KAAK,GAAGD,sBAAOL,QAAP,EAAiBG,GAAjB,CAAd;;AAEA,UAAIR,OAAO,CAACS,IAAD,EAAOE,KAAP,CAAP,IAAwBrB,UAAU,CAACmB,IAAD,EAAOE,KAAP,CAAtC,EAAqD;AACnD,eAAO,CAAC,CAACC,iBAAKH,IAAL,EAAWE,KAAX,CAAT;AACD;;AAED,aAAOF,IAAI,KAAKE,KAAhB;AACD,KAVI;AAWLE,eAAW,EAAX,UAAYL,GAAZ,EAAkCM,QAAlC,EAAuDC,MAAvD,EAAyE;AACvE,UAAI,OAAOP,GAAP,KAAe,WAAnB,EAAgC;AAC9B,cAAM,IAAIF,KAAJ,CAAU,2BAAV,CAAN;AACD;;AAED,UAAMU,SAAS,GAAG,OAAOF,QAAP,KAAoB,WAApB,IAAmC,OAAOC,MAAP,KAAkB,WAAvE;AACA,UAAMN,IAAI,GAAGC,sBAAON,IAAP,EAAaI,GAAb,CAAb;AACA,UAAMG,KAAK,GAAGD,sBAAOL,QAAP,EAAiBG,GAAjB,CAAd;AACA,UAAMS,cAAc,GAAGhB,KAAK,CAACD,OAAN,CAAcc,QAAd,IACnBA,QAAQ,CAACI,OAAT,CAAiBT,IAAjB,KAA0B,CADP,GAEnBA,IAAI,KAAKK,QAFb;AAGA,UAAMK,eAAe,GAAGlB,KAAK,CAACD,OAAN,CAAce,MAAd,IAAwBA,MAAM,CAACG,OAAP,CAAeP,KAAf,KAAyB,CAAjD,GAAqDA,KAAK,KAAKI,MAAvF;AAEA,aAAOE,cAAc,KAAKD,SAAS,GAAGG,eAAH,GAAqB,CAACH,SAApC,CAArB;AACD,KAzBI;AA0BLI,aAAS,EAAT,UAAUZ,GAAV,EAAgCO,MAAhC,EAAiD;AAC/C,UAAI,OAAOP,GAAP,KAAe,WAAnB,EAAgC;AAC9B,cAAM,IAAIF,KAAJ,CAAU,2BAAV,CAAN;AACD;;AAED,UAAMG,IAAI,GAAGC,sBAAON,IAAP,EAAaI,GAAb,CAAb;AACA,UAAMG,KAAK,GAAGD,sBAAOL,QAAP,EAAiBG,GAAjB,CAAd;AAEA,UAAMS,cAAc,GAAGhB,KAAK,CAACD,OAAN,CAAce,MAAd,IAAwBA,MAAM,CAACG,OAAP,CAAeT,IAAf,IAAuB,CAA/C,GAAmDA,IAAI,KAAKM,MAAnF;AACA,UAAMI,eAAe,GAAGlB,KAAK,CAACD,OAAN,CAAce,MAAd,IAAwBA,MAAM,CAACG,OAAP,CAAeP,KAAf,KAAyB,CAAjD,GAAqDA,KAAK,KAAKI,MAAvF;AAEA,aAAOE,cAAc,IAAIE,eAAzB;AACD,KAtCI;AAuCLE,aAAS,EAAT,UAAUb,GAAV,EAA8B;AAC5B,UAAI,OAAOA,GAAP,KAAe,WAAnB,EAAgC;AAC9B,cAAM,IAAIF,KAAJ,CAAU,2BAAV,CAAN;AACD;;AAED,aACEJ,QAAQ,CAACQ,sBAAON,IAAP,EAAaI,GAAb,CAAD,EAAoBE,sBAAOL,QAAP,EAAiBG,GAAjB,CAApB,CAAR,IACAE,sBAAON,IAAP,EAAaI,GAAb,IAAoBE,sBAAOL,QAAP,EAAiBG,GAAjB,CAFtB;AAID,KAhDI;AAiDLc,aAAS,EAAT,UAAUd,GAAV,EAA8B;AAC5B,UAAI,OAAOA,GAAP,KAAe,WAAnB,EAAgC;AAC9B,cAAM,IAAIF,KAAJ,CAAU,2BAAV,CAAN;AACD;;AAED,aACEJ,QAAQ,CAACQ,sBAAON,IAAP,EAAaI,GAAb,CAAD,EAAoBE,sBAAOL,QAAP,EAAiBG,GAAjB,CAApB,CAAR,IACAE,sBAAON,IAAP,EAAaI,GAAb,IAAoBE,sBAAOL,QAAP,EAAiBG,GAAjB,CAFtB;AAID;AA1DI,GAAP;AA4DD;;AAjEDe","names":["isPlainObj","args","every","d","prototype","Object","getPrototypeOf","toString","call","slice","isArray","Array","isNumber","treeChanges","data","nextData","Error","changed","key","left","nested_property_1","right","deep_diff_1","changedFrom","previous","actual","useActual","leftComparator","indexOf","rightComparator","changedTo","increased","decreased","exports"],"sourceRoot":"","sources":["../src/index.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"script"}