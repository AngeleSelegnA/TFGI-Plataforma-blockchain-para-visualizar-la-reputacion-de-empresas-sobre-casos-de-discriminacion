{"ast":null,"code":"import equal from '@gilbarbara/deep-equal';\nimport is from 'is-lite';\nexport function canHaveLength() {\n  var arguments_ = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    arguments_[_i] = arguments[_i];\n  }\n\n  return arguments_.every(function (d) {\n    return is.string(d) || is.array(d) || is.plainObject(d);\n  });\n}\nexport function checkEquality(left, right, value) {\n  if (!isSameType(left, right)) {\n    return false;\n  }\n\n  if ([left, right].every(is.array)) {\n    return !left.some(hasValue(value)) && right.some(hasValue(value));\n  }\n  /* istanbul ignore else */\n\n\n  if ([left, right].every(is.plainObject)) {\n    return !Object.entries(left).some(hasEntry(value)) && Object.entries(right).some(hasEntry(value));\n  }\n\n  return right === value;\n}\nexport function compareNumbers(previousData, data, options) {\n  var actual = options.actual,\n      key = options.key,\n      previous = options.previous,\n      type = options.type;\n  var left = nested(previousData, key);\n  var right = nested(data, key);\n  var changed = [left, right].every(is.number) && (type === 'increased' ? left < right : left > right);\n\n  if (!is.undefined(actual)) {\n    changed = changed && right === actual;\n  }\n\n  if (!is.undefined(previous)) {\n    changed = changed && left === previous;\n  }\n\n  return changed;\n}\nexport function compareValues(previousData, data, options) {\n  var key = options.key,\n      type = options.type,\n      value = options.value;\n  var left = nested(previousData, key);\n  var right = nested(data, key);\n  var primary = type === 'added' ? left : right;\n  var secondary = type === 'added' ? right : left; // console.log({ primary, secondary });\n\n  if (!is.nullOrUndefined(value)) {\n    if (is.defined(primary)) {\n      // check if nested data matches\n      if (is.array(primary) || is.plainObject(primary)) {\n        return checkEquality(primary, secondary, value);\n      }\n    } else {\n      return equal(secondary, value);\n    }\n\n    return false;\n  }\n\n  if ([left, right].every(is.array)) {\n    return !secondary.every(isEqualPredicate(primary));\n  }\n\n  if ([left, right].every(is.plainObject)) {\n    return hasExtraKeys(Object.keys(primary), Object.keys(secondary));\n  }\n\n  return ![left, right].every(function (d) {\n    return is.primitive(d) && is.defined(d);\n  }) && (type === 'added' ? !is.defined(left) && is.defined(right) : is.defined(left) && !is.defined(right));\n}\nexport function getIterables(previousData, data, _a) {\n  var _b = _a === void 0 ? {} : _a,\n      key = _b.key;\n\n  var left = nested(previousData, key);\n  var right = nested(data, key);\n\n  if (!isSameType(left, right)) {\n    throw new TypeError('Inputs have different types');\n  }\n\n  if (!canHaveLength(left, right)) {\n    throw new TypeError(\"Inputs don't have length\");\n  }\n\n  if ([left, right].every(is.plainObject)) {\n    left = Object.keys(left);\n    right = Object.keys(right);\n  }\n\n  return [left, right];\n}\nexport function hasEntry(input) {\n  return function (_a) {\n    var key = _a[0],\n        value = _a[1];\n\n    if (is.array(input)) {\n      return equal(input, value) || input.some(function (d) {\n        return equal(d, value) || is.array(value) && isEqualPredicate(value)(d);\n      });\n    }\n    /* istanbul ignore else */\n\n\n    if (is.plainObject(input) && input[key]) {\n      return !!input[key] && equal(input[key], value);\n    }\n\n    return equal(input, value);\n  };\n}\nexport function hasExtraKeys(left, right) {\n  return right.some(function (d) {\n    return !left.includes(d);\n  });\n}\nexport function hasValue(input) {\n  return function (value) {\n    if (is.array(input)) {\n      return input.some(function (d) {\n        return equal(d, value) || is.array(value) && isEqualPredicate(value)(d);\n      });\n    }\n\n    return equal(input, value);\n  };\n}\nexport function includesOrEqualsTo(previousValue, value) {\n  return is.array(previousValue) ? previousValue.some(function (d) {\n    return equal(d, value);\n  }) : equal(previousValue, value);\n}\nexport function isEqualPredicate(data) {\n  return function (value) {\n    return data.some(function (d) {\n      return equal(d, value);\n    });\n  };\n}\nexport function isSameType() {\n  var arguments_ = [];\n\n  for (var _i = 0; _i < arguments.length; _i++) {\n    arguments_[_i] = arguments[_i];\n  }\n\n  return arguments_.every(is.array) || arguments_.every(is.number) || arguments_.every(is.plainObject) || arguments_.every(is.string);\n}\nexport function nested(data, property) {\n  /* istanbul ignore else */\n  if (is.plainObject(data) || is.array(data)) {\n    /* istanbul ignore else */\n    if (is.string(property)) {\n      var props = property.split('.');\n      return props.reduce(function (acc, d) {\n        return acc && acc[d];\n      }, data);\n    }\n    /* istanbul ignore else */\n\n\n    if (is.number(property)) {\n      return data[property];\n    }\n\n    return data;\n  }\n\n  return data;\n}","map":{"version":3,"mappings":"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","names":["equal","is","canHaveLength","arguments_","every","d","string","array","plainObject","checkEquality","left","right","value","isSameType","some","hasValue","Object","entries","hasEntry","compareNumbers","previousData","data","options","key","previous","type","nested","changed","number","undefined","actual","compareValues","primary","secondary","nullOrUndefined","defined","isEqualPredicate","hasExtraKeys","keys","primitive","getIterables","_a","_b","TypeError","input","includes","includesOrEqualsTo","previousValue","property","props","split","reduce","acc"],"sourceRoot":"","sources":["../src/helpers.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}